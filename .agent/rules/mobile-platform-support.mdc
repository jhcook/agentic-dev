---
alwaysApply: true
globs: "**/*"
---

# Mobile Platform Support Policy (ADR-020)

This rule defines the supported lifecycle for Android and iOS operating systems to ensure security, stability, and development velocity.

## 1. Governance Policy (Current + 2)

All mobile applications MUST support the **Current Major Version** and the **Two Previous Major Versions** of the respective operating system.

- **iOS**: Current + 2 (e.g., if iOS 18 is current -> 18, 17, 16).
- **Android**: Current + 2 (based on Android API Levels corresponding to major versions).

## 2. Technical Enforcement

The policy MUST be reflected in the codebase configuration.

### Android (`android/build.gradle`)
- `minSdkVersion` MUST be set to the API level corresponding to the oldest supported major version.
- `targetSdkVersion` MUST be set to the Current major version (or latest stable API level).

### iOS (`ios/Podfile`)
- `platform :ios` MUST be set to the oldest supported major version (e.g., `'16.0'`).

## 3. Dropping Support (Deprecation Process)

When a new major OS version is released, the oldest supported version enters the **Deprecation Phase**.

### Validation Required (@Product / @Analytics)
- Before dropping support, verify that **< 5%** of active users are on the version to be dropped.
- If usage is > 5%, a **User Notification Plan** is REQUIRED (@Compliance check).
    - Users must be notified at least 30 days in advance via in-app message or email.

### Sunset Testing (@QA)
- A final regression test MUST be performed on the version being dropped to ensure:
    - The app allows for a graceful "Update Required" or "Not Supported" state.
    - The app does not crash on launch.

## 4. Deep Links (@Security)
- When supporting new OS versions, **Deep Link** verification (Android App Links / iOS Universal Links) MUST be performed to ensure no regression in verification logic changes by the OS.


## Copyright

Copyright 2026 Justin Cook

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
