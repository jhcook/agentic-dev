---
alwaysApply: true
---

# Documentation Standards

## 1. Documentation Structure

-   `docs/`: High-level architecture, user guides, and API specs.
-   `backend/docs/`: Backend-specific implementation details.
-   `web/docs-site/`: Public-facing documentation site content.
-   `.agent/adrs/`: Architecture Decision Records (ADRs).

## 2. Code Comments & Docstrings

### Web & Mobile (TypeScript)
-   **Mandatory**: Use **TSDoc** (`/** ... */`) for all exported components, hooks, and utility functions.
-   **Params**: Document all parameters and return types.
-   **Example**:
    ```typescript
    /**
     * Calculates the total price including tax.
     * @param price - The base price.
     * @returns The total price.
     */
    ```

### Backend (Python)
-   **Mandatory**: Follow **PEP-257** for all public modules, classes, and functions.
-   **Format**: Use triple double-quotes (`"""`).
-   **Style**: Google Style is preferred for complex functions.

## 3. API Documentation
-   **Source of Truth**: `docs/openapi.yaml` (See `api-contract-validation.mdc`).
-   **Updates**: Must be regenerated via `scripts/generate_openapi.py` on any API change.

## 4. Architecture Decisions (ADRs)
-   **Requirement**: Any significant architectural decision (e.g., adding a database, changing a framework) MUST be recorded in `.agent/adrs/`.
-   **Format**: Use the standard ADR template (Title, Status, Context, Decision, Consequences).

## 5. Change Management
-   **CHANGELOG.md**: Must be updated for all user-facing changes or breaking API changes.

## 6. Operational Documentation
-   **New Features**: Any new CLI command or feature MUST have a corresponding entry in `docs/commands.md` (or equivalent).
-   **Error Handling**: Documentation must clearly state visible error conditions and troubleshooting steps for the user.

## 7. Observability Requirements
-   **Failure Modes**: New features must implement logging/metrics for failure scenarios (not just "happy path").
-   **Traceability**: Errors must propagate sufficient context (e.g., Request ID, Story ID) to allow debugging.

## 8. Enforcement
-   Missing docstrings on new public code -> **BLOCK**.
-   Missing ADR for major architectural shift -> **BLOCK**.
-   New feature without operational docs -> **BLOCK**.

