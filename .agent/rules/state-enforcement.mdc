---
trigger: always_on
description: Enforce strict state transitions for Plans, Stories, Runbooks, and Journeys.
globs: ["**/*.md", "**/*.yaml"]
---

# Governance State Enforcement

To ensure high-quality, governed development, the following state transitions are enforced:

## 1. Plans
- **File**: `.agent/cache/plans/<SCOPE>/<ID>.md`
- **Required State**: `Status: APPROVED`
- **Constraint**: A Story cannot be created or worked on until its parent Plan is APPROVED.

## 2. Stories
- **File**: `.agent/cache/stories/<SCOPE>/<ID>.md`
- **Required State**: `State: COMMITTED` (or `Status: COMMITTED`) `State: OPEN` (or `Status: OPEN`)
- **Constraint**: A Runbook cannot be created for a Story unless the Story is COMMITTED.
- **Meaning**: The requirements are finalized and "locked in".

## 3. Runbooks
- **File**: `.agent/cache/runbooks/<SCOPE>/<ID>-runbook.md`
- **Required State**: `Status: ACCEPTED`
- **Constraint**: The `agent implement` command will fail unless the Runbook is ACCEPTED.
- **Meaning**: The implementation plan and architectural approach have been reviewed and approved by the Governance Panel (or the Agent acting as proxy).

## 4. Journeys
- **File**: `.agent/cache/journeys/<SCOPE>/JRN-*.yaml`
- **Required State**: `# State: ACCEPTED`
- **Constraint**: A Journey should be linked to at least one Story before being ACCEPTED.
- **Meaning**: The behavioral contract is finalized and represents a real user workflow.

## Copyright

Copyright 2026 Justin Cook

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
